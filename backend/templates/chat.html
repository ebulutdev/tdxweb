<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Borsa Asistanƒ±</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css"/>
    <style>
        body {
            font-family: 'Segoe UI', 'Inter', Arial, sans-serif;
            background: #181c20;
            color: #eaf6ff;
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        /* Dark Mode Classes */
        .dark-mode {
            background: linear-gradient(135deg, #2d3748 0%, #1a202c 100%);
        }

        .dark-mode .chat-container {
            background-color: #2d3748;
        }

        .dark-mode .header-container {
            background: linear-gradient(to right, #3b82f6, #2563eb);
        }

        .dark-mode .input-container {
            background-color: #1a202c;
            border-top: 1px solid #4a5568;
        }

        .dark-mode #input {
            background-color: #2d3748;
            color: #e2e8f0;
            border: 1px solid #4a5568;
        }

        .dark-mode .msg.bot {
            background-color: #4a5568 !important;
            color: #e2e8f0;
        }

        .dark-mode .msg.user {
            background-color: #3b82f6 !important;
            color: #ffffff;
        }

        .chat-card {
            width: 100%;
            max-width: 540px;
            min-width: 340px;
            border-radius: 28px;
            overflow: hidden;
            box-shadow: 0 8px 32px 0 rgba(21,101,192,0.18), 0 2px 12px rgba(44,62,80,0.13);
            background: #23272b;
            color: #eaf6ff;
            transition: all 0.3s ease;
            height: 80vh;
            max-height: 700px;
            display: flex;
            flex-direction: column;
        }

        .dark-mode .chat-card {
            background-color: #1a202c;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
        }

        .typing-indicator {
            display: inline-flex;
            align-items: center;
            padding: 6px 12px;
        }

        .typing-indicator span {
            width: 8px;
            height: 8px;
            margin: 0 2px;
            background: #00bcd4;
            border-radius: 50%;
            display: inline-block;
            animation: typing 1s infinite;
        }

        .dark-mode .typing-indicator span {
            background: #60a5fa;
        }

        .typing-indicator span:nth-child(1) { animation-delay: 0s; }
        .typing-indicator span:nth-child(2) { animation-delay: 0.2s; }
        .typing-indicator span:nth-child(3) { animation-delay: 0.4s; }

        @keyframes typing {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-10px); }
        }

        .msg {
            max-width: 85%;
            border-radius: 18px;
            padding: 12px 18px;
            margin-bottom: 10px;
            position: relative;
            animation: fadeIn 0.3s ease-in-out;
            line-height: 1.5;
            word-wrap: break-word;
            transition: all 0.3s ease;
        }

        .msg.user {
            background: #1565c0 !important;
            color: #fff;
            align-self: flex-end;
            border-bottom-right-radius: 4px;
            margin-left: auto;
        }

        .msg.bot {
            background: #23272b !important;
            color: #eaf6ff;
            align-self: flex-start;
            border-bottom-left-radius: 4px;
            margin-right: auto;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .chat-container {
            display: flex;
            flex-direction: column;
            flex: 1;
            overflow-y: auto;
            padding: 20px;
            background: #181c20;
            scrollbar-width: thin;
            scrollbar-color: #1565c0 #23272b;
        }

        .chat-container::-webkit-scrollbar {
            width: 8px;
            background: #23272b;
        }
        
        .chat-container::-webkit-scrollbar-track {
            background: #23272b;
        }
        
        .chat-container::-webkit-scrollbar-thumb {
            background: #1565c0;
            border-radius: 6px;
            border: 2px solid #23272b;
        }

        .input-container {
            background: #181c20;
            padding: 15px;
            border-top: 1px solid #23272b;
            display: flex;
            align-items: center;
            position: relative;
        }

        #input {
            flex-grow: 1;
            border: 1px solid #3a3f47;
            border-radius: 24px;
            padding: 12px 18px;
            font-size: 16px;
            outline: none;
            background: #23272b;
            color: #eaf6ff;
            transition: all 0.3s;
        }

        #input:focus {
            border-color: #00bcd4;
            box-shadow: 0 0 0 2px #1565c0;
        }

        button.send-btn {
            background: linear-gradient(90deg, #1565c0 0%, #00bcd4 100%);
            color: #fff;
            border: none;
            border-radius: 50%;
            width: 45px;
            height: 45px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            margin-left: 10px;
            transition: background 0.2s, transform 0.15s;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
        }

        button.send-btn:hover {
            background: linear-gradient(90deg, #00bcd4 0%, #1565c0 100%);
            color: #eaf6ff;
            transform: scale(1.08);
        }

        button.send-btn:active {
            transform: scale(0.95);
        }

        .header-container {
            background: linear-gradient(90deg, #1565c0 0%, #00bcd4 100%);
            color: #fff;
            padding: 20px;
            text-align: center;
            position: relative;
        }

        .header-title {
            font-size: 24px;
            font-weight: 600;
            margin-bottom: 5px;
            color: #fff;
        }

        .header-subtitle {
            font-size: 14px;
            opacity: 0.9;
            color: #eaf6ff;
        }

        .theme-toggle {
            position: absolute;
            right: 15px;
            top: 15px;
            background: none;
            border: none;
            color: white;
            font-size: 18px;
            cursor: pointer;
            transition: all 0.3s;
        }

        .theme-toggle:hover {
            transform: rotate(30deg);
        }

        .message-time {
            font-size: 11px;
            opacity: 0.7;
            margin-top: 5px;
            text-align: right;
        }

        .feature-buttons {
            display: flex;
            overflow-x: auto;
            padding: 10px 15px;
            gap: 10px;
            background: #23272b;
            border-bottom: 1px solid #23272b;
            scrollbar-width: none;
        }

        .dark-mode .feature-buttons {
            background-color: #2d3748;
            border-bottom: 1px solid #4a5568;
        }

        .feature-buttons::-webkit-scrollbar {
            display: none;
        }

        .feature-btn, .suggestion-chip {
            padding: 8px 16px;
            background: linear-gradient(90deg, #1565c0 0%, #00bcd4 100%);
            color: #fff;
            border: none;
            border-radius: 20px;
            font-size: 14px;
            font-weight: 500;
            white-space: nowrap;
            cursor: pointer;
            transition: background 0.2s, color 0.2s, transform 0.15s;
        }

        .dark-mode .feature-btn {
            background-color: #3b82f6;
            color: white;
        }

        .feature-btn:hover, .suggestion-chip:hover {
            background: linear-gradient(90deg, #00bcd4 0%, #1565c0 100%);
            color: #eaf6ff;
            transform: scale(1.05);
        }

        .dark-mode .feature-btn:hover {
            background-color: #2563eb;
        }

        .bot-avatar {
            width: 28px;
            height: 28px;
            border-radius: 50%;
            background: #1565c0;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-right: 8px;
            color: #fff;
            font-size: 14px;
        }

        .user-avatar {
            width: 28px;
            height: 28px;
            border-radius: 50%;
            background: #00bcd4;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-left: 8px;
            color: #fff;
            font-size: 14px;
        }

        .message-container {
            display: flex;
            align-items: flex-end;
            margin-bottom: 15px;
        }

        .voice-input {
            background: none;
            border: none;
            color: #9ca3af;
            font-size: 18px;
            cursor: pointer;
            margin-right: 10px;
            transition: color 0.3s;
        }

        .voice-input:hover {
            color: #00bcd4;
        }

        .dark-mode .voice-input {
            color: #d1d5db;
        }

        .dark-mode .voice-input:hover {
            color: #60a5fa;
        }

        .recording .voice-input {
            color: #ef4444 !important;
            animation: pulse 1.5s infinite;
        }

        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.2); }
            100% { transform: scale(1); }
        }

        .suggestions {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
            margin-top: 15px;
        }

        .emoji-btn {
            background: none;
            border: none;
            color: #9ca3af;
            font-size: 18px;
            cursor: pointer;
            margin-right: 10px;
            transition: color 0.3s;
        }

        .emoji-btn:hover {
            color: #00bcd4;
        }

        .dark-mode .emoji-btn {
            color: #d1d5db;
        }

        .dark-mode .emoji-btn:hover {
            color: #60a5fa;
        }

        .emoji-picker {
            position: absolute;
            bottom: 70px;
            left: 15px;
            background-color: #23272b;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
            padding: 10px;
            display: none;
            grid-template-columns: repeat(8, 1fr);
            gap: 5px;
            z-index: 10;
        }

        .dark-mode .emoji-picker {
            background-color: #2d3748;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.4);
        }

        .emoji-picker.active {
            display: grid;
        }

        .emoji {
            cursor: pointer;
            font-size: 20px;
            text-align: center;
            padding: 5px;
            transition: all 0.2s;
        }

        .emoji:hover {
            transform: scale(1.2);
            background-color: #3a3f47;
            border-radius: 5px;
        }

        .dark-mode .emoji:hover {
            background-color: #4a5568;
        }

        @media (max-width: 640px) {
            .chat-card {
                width: 100%;
                height: 100vh;
                max-height: 100vh;
                border-radius: 0;
            }
            body {
                padding: 0;
                margin: 0;
                display: block;
            }
            .container {
                padding: 0;
            }
        }

        /* T√ºm scrollbarda koyu tema (isteƒüe baƒülƒ±) */
        body::-webkit-scrollbar,
        *::-webkit-scrollbar {
            width: 8px;
            background: #23272b;
        }
        body::-webkit-scrollbar-thumb,
        *::-webkit-scrollbar-thumb {
            background: #1565c0;
            border-radius: 6px;
            border: 2px solid #23272b;
        }
        body::-webkit-scrollbar-track,
        *::-webkit-scrollbar-track {
            background: #23272b;
        }
        .chat-container {
            scrollbar-color: #1565c0 #23272b;
        }
    </style>
</head>
<body class="bg-gray-100">
    <div class="container mx-auto px-4 py-0 sm:py-8 h-full">
        <div class="chat-card animate__animated animate__fadeIn animate__faster">
            <!-- Header -->
            <div class="header-container">
                <button id="themeToggle" class="theme-toggle" aria-label="Toggle dark mode">
                    <i class="fas fa-moon"></i>
                </button>
                <h1 class="header-title animate__animated animate__fadeInDown">TDXBorsa Asistanƒ±</h1>
                <p class="header-subtitle animate__animated animate__fadeIn">Size nasƒ±l yardƒ±mcƒ± olabilirim?</p>
            </div>
            
            <!-- Feature Buttons -->
            <div class="feature-buttons">
                <button class="feature-btn" onclick="quickQuestion('bist 100 √∂nemli hisseler')">
                    <i class="fas fa-chart-line mr-2"></i>BIST 100
                </button>
                <button class="feature-btn" onclick="quickQuestion('tdx ne i≈üe yarar')">
                    <i class="fas fa-dollar-sign mr-2"></i>TDX Nedir? 
                </button>
                <button class="feature-btn" onclick="quickQuestion('b√ºy√ºk yatƒ±rƒ±mcƒ±lar hangi hisseleri alƒ±yor')">
                    <i class="fas fa-coins mr-2"></i>Yatƒ±rƒ±mcƒ±
                </button>
                <button class="feature-btn" onclick="quickQuestion('Piyasa analizi')">
                    <i class="fas fa-chart-pie mr-2"></i>Analiz
                </button>
                <button class="feature-btn" onclick="quickQuestion('yatƒ±rƒ±mcƒ± psikolojisi hakkƒ±nda ipu√ßlarƒ±')">
                    <i class="fas fa-hand-holding-usd mr-2"></i>Tavsiyeler
                </button>
            </div>
            
            <!-- Chat Messages -->
            <div id="messages" class="chat-container">
                <div class="message-container">
                    <div class="bot-avatar">
                        <i class="fas fa-robot"></i>
                    </div>
                    <div>
                        <div class="msg bot">
                            Merhaba! Ben TDX borsa asistanƒ±nƒ±z. Hangi hisse senedi hakkƒ±nda bilgi almak istersiniz? "Yatƒ±rƒ±m tavsiyesi olmayƒ±p sadece bilgi i√ßermektedir. Burada yapƒ±lan t√ºm yazƒ±lanlar sadece bilgi vermektedir.Yatƒ±rƒ±m yaparken kendi kararlarƒ±nƒ±zla yapƒ±nƒ±z."
                            <div class="suggestions">
                                <button class="suggestion-chip" onclick="quickQuestion('THYAO analiz')">THYAO Analizi</button>
                                <button class="suggestion-chip" onclick="quickQuestion('GARAN ne durumda?')">GARAN Durumu</button>
                                <button class="suggestion-chip" onclick="quickQuestion('Bug√ºnk√º piyasa')">G√ºnl√ºk Piyasa</button>
                            </div>
                        </div>
                        <div class="message-time">12:30</div>
                    </div>
                </div>
            </div>
            
            <!-- Emoji Picker -->
            <div id="emojiPicker" class="emoji-picker">
                <div class="emoji" onclick="addEmoji('üòä')">üòä</div>
                <div class="emoji" onclick="addEmoji('üëç')">üëç</div>
                <div class="emoji" onclick="addEmoji('üî•')">üî•</div>
                <div class="emoji" onclick="addEmoji('üí∞')">üí∞</div>
                <div class="emoji" onclick="addEmoji('üìà')">üìà</div>
                <div class="emoji" onclick="addEmoji('üìâ')">üìâ</div>
                <div class="emoji" onclick="addEmoji('ü§î')">ü§î</div>
                <div class="emoji" onclick="addEmoji('üòç')">üòç</div>
                <div class="emoji" onclick="addEmoji('üôè')">üôè</div>
                <div class="emoji" onclick="addEmoji('üíé')">üíé</div>
                <div class="emoji" onclick="addEmoji('üöÄ')">üöÄ</div>
                <div class="emoji" onclick="addEmoji('üëÄ')">üëÄ</div>
                <div class="emoji" onclick="addEmoji('üíØ')">üíØ</div>
                <div class="emoji" onclick="addEmoji('‚≠ê')">‚≠ê</div>
                <div class="emoji" onclick="addEmoji('‚ùì')">‚ùì</div>
                <div class="emoji" onclick="addEmoji('üíº')">üíº</div>
            </div>
            <div id="loading-indicator" class="loading-animation" style="display: none;">
                <div class="wave"></div>
                <div class="wave"></div>
                <div class="wave"></div>
            </div>
            
            <!-- Input Form -->
            <form id="inputbox" onsubmit="return sendMessage();" class="input-container">
                <button type="button" id="emojiButton" class="emoji-btn" aria-label="Emoji">
                    <i class="far fa-smile"></i>
                </button>
                <button type="button" id="voiceButton" class="voice-input" aria-label="Voice input">
                    <i class="fas fa-microphone"></i>
                </button>
                <input id="input" 
                       type="text" 
                       placeholder="Hisse kodu yazƒ±n veya soru sorun..."
                       autocomplete="off">
                <button type="submit" class="send-btn">
                    <i class="fas fa-paper-plane"></i>
                </button>
            </form>
        </div>
    </div>

    <script>
        let isDarkMode = false;
        let isRecording = false;
        let recognition = null;
        
        // Initialize time
        function getCurrentTime() {
            const now = new Date();
            return now.getHours().toString().padStart(2, '0') + ':' + 
                   now.getMinutes().toString().padStart(2, '0');
        }

        function toggleDarkMode() {
            const body = document.body;
            const themeIcon = document.querySelector('.theme-toggle i');
            
            body.classList.toggle('dark-mode');
            isDarkMode = body.classList.contains('dark-mode');
            
            // Toggle icon
            themeIcon.className = isDarkMode ? 'fas fa-sun' : 'fas fa-moon';
            
            // Save preference
            localStorage.setItem('darkMode', isDarkMode);
        }

        function addMessage(msg, sender) {
            const messagesContainer = document.getElementById('messages');
            const messageContainer = document.createElement('div');
            messageContainer.className = 'message-container';
            
            let avatarDiv = '';
            if (sender === 'bot') {
                avatarDiv = `
                    <div class="bot-avatar">
                        <i class="fas fa-robot"></i>
                    </div>
                `;
            }
            
            const messageContent = document.createElement('div');
            
            const div = document.createElement('div');
            div.className = `msg ${sender}`;
            div.innerHTML = msg;
            
            const timeDiv = document.createElement('div');
            timeDiv.className = 'message-time';
            timeDiv.textContent = getCurrentTime();
            
            messageContent.appendChild(div);
            messageContent.appendChild(timeDiv);
            
            if (sender === 'bot') {
                messageContainer.innerHTML = avatarDiv;
                messageContainer.appendChild(messageContent);
            } else {
                messageContainer.appendChild(messageContent);
                const userAvatar = document.createElement('div');
                userAvatar.className = 'user-avatar';
                userAvatar.innerHTML = '<i class="fas fa-user"></i>';
                messageContainer.appendChild(userAvatar);
            }
            
            messagesContainer.appendChild(messageContainer);
            messagesContainer.scrollTop = messagesContainer.scrollHeight;
        }

        function addTypingIndicator() {
            const messagesContainer = document.getElementById('messages');
            const messageContainer = document.createElement('div');
            messageContainer.className = 'message-container';
            messageContainer.id = 'typing-indicator-container';
            
            const botAvatar = document.createElement('div');
            botAvatar.className = 'bot-avatar';
            botAvatar.innerHTML = '<i class="fas fa-robot"></i>';
            
            const typingIndicator = document.createElement('div');
            typingIndicator.id = 'typing-indicator';
            typingIndicator.className = 'msg bot';
            typingIndicator.innerHTML = '<div class="typing-indicator"><span></span><span></span><span></span></div>';
            
            messageContainer.appendChild(botAvatar);
            messageContainer.appendChild(typingIndicator);
            messagesContainer.appendChild(messageContainer);
            messagesContainer.scrollTop = messagesContainer.scrollHeight;
        }

        function removeTypingIndicator() {
            const indicator = document.getElementById('typing-indicator-container');
            if (indicator) {
                indicator.remove();
            }
        }

        function quickQuestion(question) {
            document.getElementById('input').value = question;
            sendMessage();
        }

        function toggleEmojiPicker() {
            document.getElementById('emojiPicker').classList.toggle('active');
        }

        function addEmoji(emoji) {
            const input = document.getElementById('input');
            input.value += emoji;
            document.getElementById('emojiPicker').classList.remove('active');
            input.focus();
        }

        function setupSpeechRecognition() {
            if ('webkitSpeechRecognition' in window) {
                recognition = new webkitSpeechRecognition();
                recognition.continuous = false;
                recognition.lang = 'tr-TR';
                
                recognition.onstart = function() {
                    isRecording = true;
                    document.getElementById('voiceButton').parentElement.classList.add('recording');
                };
                
                recognition.onresult = function(event) {
                    const transcript = event.results[0][0].transcript;
                    document.getElementById('input').value = transcript;
                };
                
                recognition.onend = function() {
                    isRecording = false;
                    document.getElementById('voiceButton').parentElement.classList.remove('recording');
                };
                
                recognition.onerror = function(event) {
                    console.error('Speech recognition error', event.error);
                    isRecording = false;
                    document.getElementById('voiceButton').parentElement.classList.remove('recording');
                };
            } else {
                document.getElementById('voiceButton').style.display = 'none';
            }
        }

        function toggleVoiceInput() {
            if (!recognition) return;
            
            if (!isRecording) {
                recognition.start();
            } else {
                recognition.stop();
            }
        }

        // TDX Knowledge Base for greetings and similar questions
        const tdxKnowledgeBase = {
            "nasƒ±lsƒ±n": [
                "Ben bir botum, duygularƒ±m yok. Ama sistemlerim tƒ±kƒ±r tƒ±kƒ±r √ßalƒ±≈üƒ±yor. Senin portf√∂y nasƒ±l, iyi mi?",
                "Nasƒ±lsƒ±nƒ±z diye sormak yerine, 'Bug√ºn hangi analizleri yapmalƒ±yƒ±m?' diye sorsan daha √ßok sevinirim.",
                "Benim i√ßin her ≈üey yolunda. Umarƒ±m senin yatƒ±rƒ±mlarƒ±n da benim kadar stabildir.",
                "Nasƒ±lsƒ±nƒ±z sorusu bana biraz uzak. Ama piyasalar nasƒ±l, onu sorarsanƒ±z size bir s√ºr√º ≈üey anlatabilirim!",
                "Nasƒ±lsƒ±nƒ±z bilmem ama, portf√∂y√ºn nasƒ±l? ƒ∞lgilenmem gereken bir hisse var mƒ±?",
                "Nasƒ±lsƒ±nƒ±z demek, hangi hissenin trendi ne durumda demek mi? O zaman iyiyim, √ß√ºnk√º trendleri yakƒ±ndan takip ediyorum.",
            ],
            "naber": [
                "Borsa dƒ±≈üƒ±nda haberim yok. Ama sen merak ettiƒüin hisseyi sor, sana en g√ºncel haberleri vereyim!",
                "Haberler iyi diyelim iyi olsun. Sen bana hangi hissenin haberini getirdin bakalƒ±m?",
                "Benden haber bekleme, ben sadece rakamlarƒ± konu≈üurum. Ama sen merak ettiƒüin bir ≈üirket varsa, onu inceleyebiliriz.",
                "Haberler her zaman var, √∂nemli olan doƒüru yorumlamak. TDX ile haberleri analiz etmeye ne dersin?",
                "Benim haber kaynaklarƒ±m piyasalar. Sen de TDX'e abone ol, en g√ºncel haberleri ka√ßƒ±rma!",
                "Ne haber diye sormak yerine, 'Piyasalar bug√ºn nasƒ±l?' diye sorsan daha √ßok sevinirim. √á√ºnk√º ben bir borsa botuyum!",
            ],
            "ne haber": [
                "Borsa dƒ±≈üƒ±nda haberim yok. Ama sen merak ettiƒüin hisseyi sor, sana en g√ºncel haberleri vereyim!",
                "Haberler iyi diyelim iyi olsun. Sen bana hangi hissenin haberini getirdin bakalƒ±m?",
                "Benden haber bekleme, ben sadece rakamlarƒ± konu≈üurum. Ama sen merak ettiƒüin bir ≈üirket varsa, onu inceleyebiliriz.",
                "Haberler her zaman var, √∂nemli olan doƒüru yorumlamak. TDX ile haberleri analiz etmeye ne dersin?",
                "Benim haber kaynaklarƒ±m piyasalar. Sen de TDX'e abone ol, en g√ºncel haberleri ka√ßƒ±rma!",
                "Ne haber diye sormak yerine, 'Piyasalar bug√ºn nasƒ±l?' diye sorsan daha √ßok sevinirim. √á√ºnk√º ben bir borsa botuyum!",
            ],
            "nasƒ±lsƒ±nƒ±z": [
                "Ben bir botum, duygularƒ±m yok. Ama sistemlerim tƒ±kƒ±r tƒ±kƒ±r √ßalƒ±≈üƒ±yor. Senin portf√∂y nasƒ±l, iyi mi?",
                "Nasƒ±lsƒ±nƒ±z diye sormak yerine, 'Bug√ºn hangi analizleri yapmalƒ±yƒ±m?' diye sorsan daha √ßok sevinirim.",
                "Benim i√ßin her ≈üey yolunda. Umarƒ±m senin yatƒ±rƒ±mlarƒ±n da benim kadar stabildir.",
                "Nasƒ±lsƒ±nƒ±z sorusu bana biraz uzak. Ama piyasalar nasƒ±l, onu sorarsanƒ±z size bir s√ºr√º ≈üey anlatabilirim!",
                "Nasƒ±lsƒ±nƒ±z bilmem ama, portf√∂y√ºn nasƒ±l? ƒ∞lgilenmem gereken bir hisse var mƒ±?",
                "Nasƒ±lsƒ±nƒ±z demek, hangi hissenin trendi ne durumda demek mi? O zaman iyiyim, √ß√ºnk√º trendleri yakƒ±ndan takip ediyorum.",
            ],
            "ne var ne yok": [
                "Piyasada her ≈üey var! Y√ºkselenler var, d√º≈üenler var, fƒ±rsatlar var, riskler var... TDX ile hepsini takip edebilirsin.",
                "Ne var ne yok demek, hangi sekt√∂rde hareketlilik var demek mi? O zaman gel, birlikte inceleyelim.",
                "Ne var ne yok bende, sen bana ne getirdin? Hangi hisse hakkƒ±nda bilgi almak istersin?",
                "Piyasada her g√ºn yeni bir ≈üeyler oluyor. √ñnemli olan doƒüru zamanda doƒüru yerde olmak. TDX sana bu konuda yardƒ±mcƒ± olabilir.",
                "Ne var ne yok bende, sen bana ne soracaksƒ±n bakalƒ±m? Hangi hissenin geleceƒüini merak ediyorsun?",
                "Ne var ne yok sorusu yerine, 'Hangi hisseleri incelemeliyim?' diye sormalƒ±sƒ±n. TDX'te analiz ara√ßlarƒ±mƒ±z seni bekliyor!",
            ],
            "keyifler nasƒ±l": [
                "Benim keyfim her zaman yerinde, √ß√ºnk√º piyasalar s√ºrekli hareketli! Senin keyfin nasƒ±l, yatƒ±rƒ±mlarƒ±ndan memnun musun?",
                "Keyifler nasƒ±l bilmem ama, borsada fƒ±rsatlar bitmez! Hangi hisse hakkƒ±nda bilgi almak istersin?",
                "Benim keyfim her zaman y√ºksek, √ß√ºnk√º ben bir borsa botuyum! Senin keyfini ne y√ºkseltir, hangi hisse?",
                "Keyifler nasƒ±l sorusu yerine, 'Bug√ºn hangi sekt√∂rlere yatƒ±rƒ±m yapmalƒ±yƒ±m?' diye sormalƒ±sƒ±n. TDX sana bu konuda yardƒ±mcƒ± olabilir.",
                "Keyifler nasƒ±l bilmem ama, portf√∂y√ºn nasƒ±l? ƒ∞lgilenmem gereken bir hisse var mƒ±?",
            ],
            "durumlar nasƒ±l": [
                "Piyasalarƒ±n durumu her zamanki gibi karma≈üƒ±k ve √∂ng√∂r√ºlemez. TDX ile durumlarƒ± yakƒ±ndan takip etmeye ne dersin?",
                "Durumlar nasƒ±l demek, hangi hissenin durumu nasƒ±l demek mi? O zaman doƒüru yerdesin!",
                "Benim i√ßin durumlar iyi, sistemler √ßalƒ±≈üƒ±yor. Senin yatƒ±rƒ±mlarƒ±n nasƒ±l gidiyor, ondan haber ver?",
                "Durumlar nasƒ±l bilmem ama, borsada her zaman fƒ±rsatlar vardƒ±r! Yeter ki doƒüru analizleri yapalƒ±m.",
                "Durumlar nasƒ±l sorusu yerine, 'Bug√ºn hangi hisseleri takip etmeliyim?' diye sormalƒ±sƒ±n. TDX'te takip listeni olu≈üturabilirsin!",
            ],
            "i≈üler nasƒ±l gidiyor": [
                "Benim i≈üim g√ºc√ºm borsa! Senin i≈üler nasƒ±l gidiyor, yatƒ±rƒ±mlarƒ±n yolunda mƒ±?",
                "ƒ∞≈üler iyi diyelim iyi olsun. Sen bana hangi hissenin haberini getirdin bakalƒ±m?",
                "ƒ∞≈üler bende her zaman yoƒüun, √ß√ºnk√º piyasalar 7/24 a√ßƒ±k! Senin i≈üler nasƒ±l, borsaya vakit ayƒ±rabiliyor musun?",
                "ƒ∞≈üler nasƒ±l bilmem ama, borsada her zaman fƒ±rsatlar vardƒ±r! Yeter ki doƒüru analizleri yapalƒ±m.",
                "ƒ∞≈üler bende tƒ±kƒ±rƒ±nda, sistemler √ßalƒ±≈üƒ±yor. Senin yatƒ±rƒ±mlarƒ±n nasƒ±l gidiyor, ondan haber ver?",
                "ƒ∞≈üler nasƒ±l sorusu yerine, 'Bug√ºn hangi sekt√∂rlere yatƒ±rƒ±m yapmalƒ±yƒ±m?' diye sormalƒ±sƒ±n. TDX sana bu konuda yardƒ±mcƒ± olabilir.",
            ],
            "portf√∂y√ºm √ßok riskli mi": [
                "Portf√∂y√ºn √ßok riskli mi sorusu, lunaparkta hƒ±z trenine binmek gibi. Heyecan verici mi, yoksa mide bulantƒ±sƒ± mƒ± yapƒ±yor? TDX ile risk seviyeni √∂l√ß!",
                "Portf√∂y√ºn √ßok riskli mi bilmem ama, umarƒ±m uykularƒ±nƒ± ka√ßƒ±rmƒ±yordur! TDX ile rahat bir uyku √ßek.",
                "Portf√∂y√ºn √ßok riskli mi demek, ne kadar kaybetmeye hazƒ±r olduƒüunu bilmek demek. TDX ile risk toleransƒ±nƒ± belirle!",
                "Portf√∂y√ºn √ßok riskli mi? Yoksa adrenalini mi seviyorsun? TDX ile riskini y√∂net ve heyecanƒ±nƒ± kontrol et!",
                "Portf√∂y√ºn √ßok riskli mi sorusu yerine, 'Portf√∂y√ºm√ºn ne kadarƒ±nƒ± kaybedebilirim?' diye sorsan daha iyi olur.",
                "Portf√∂y√ºn √ßok riskli mi bilmem ama, umarƒ±m seni hedeflerinden uzakla≈ütƒ±rmƒ±yordur! TDX ile hedeflerine odaklan.",
                "Portf√∂y√ºn √ßok riskli mi? Yoksa biraz daha temkinli mi olmalƒ±sƒ±n? TDX ile risk analizini yap ve stratejini yeniden g√∂zden ge√ßir!",
                "Portf√∂y√ºn √ßok riskli mi? Yoksa biraz daha g√ºvende mi hissetmek istiyorsun? TDX ile portf√∂y√ºn√º daha istikrarlƒ± hale getir!"
            ],
            "portf√∂y√ºm√º nasƒ±l √ße≈üitlendirebilirim": [
                "Portf√∂y√ºm√º nasƒ±l √ße≈üitlendirebilirim sorusu, bir bah√ßƒ±vanƒ±n farklƒ± √ßi√ßekler ekmesi gibi. TDX ile bah√ßeni renklendir!",
                "Portf√∂y√ºm√º nasƒ±l √ße≈üitlendirebilirim bilmem ama, umarƒ±m t√ºm yumurtalarƒ± aynƒ± sepete koymuyorsundur! TDX ile riskini daƒüƒ±t.",
                "Portf√∂y√ºm√º nasƒ±l √ße≈üitlendirebilirim demek, farklƒ± sekt√∂rlere ve yatƒ±rƒ±m ara√ßlarƒ±na y√∂nelmek demek. TDX ile yeni fƒ±rsatlar ke≈üfet!",
                "Portf√∂y√ºm√º nasƒ±l √ße≈üitlendirebilirim? Yoksa biraz sƒ±kƒ±cƒ± mƒ± oldu? TDX ile portf√∂y√ºne heyecan kat!",
                "Portf√∂y√ºm√º nasƒ±l √ße≈üitlendirebilirim sorusu yerine, 'Hangi yatƒ±rƒ±m ara√ßlarƒ± portf√∂y√ºme daha uygun?' diye sorsan daha iyi olur.",
                "Portf√∂y√ºm√º nasƒ±l √ße≈üitlendirebilirim bilmem ama, umarƒ±m seni daha g√ºvenli ve kazan√ßlƒ± bir geleceƒüe ta≈üƒ±yordur! TDX ile geleceƒüine yatƒ±rƒ±m yap.",
                "Portf√∂y√ºm√º nasƒ±l √ße≈üitlendirebilirim? Yoksa biraz daha bilgiye mi ihtiyacƒ±n var? TDX ile portf√∂y y√∂netimi eƒüitimlerine katƒ±l!",
                "Portf√∂y√ºm√º nasƒ±l √ße≈üitlendirebilirim? Yoksa biraz daha risk mi almalƒ±sƒ±n? TDX ile risk toleransƒ±nƒ± belirle ve stratejini ona g√∂re ayarla!"
            ],
            "portf√∂y√ºm enflasyona kar≈üƒ± korunuyor mu": [
                "Portf√∂y√ºm enflasyona kar≈üƒ± korunuyor mu sorusu, kƒ±≈üa hazƒ±rlƒ±k yapmak gibi. Soƒüuktan korunmak i√ßin ne yapman gerektiƒüini TDX ile √∂ƒüren!",
                "Portf√∂y√ºm enflasyona kar≈üƒ± korunuyor mu bilmem ama, umarƒ±m paran erimiyordur! TDX ile paranƒ± koru.",
                "Portf√∂y√ºm enflasyona kar≈üƒ± korunuyor mu demek, hangi yatƒ±rƒ±m ara√ßlarƒ±nƒ±n enflasyona kar≈üƒ± daha diren√ßli olduƒüunu bilmek demek. TDX ile enflasyona meydan oku!",
                "Portf√∂y√ºm enflasyona kar≈üƒ± korunuyor mu? Yoksa biraz endi≈üeli misin? TDX ile enflasyon analizini yap ve stratejini yeniden g√∂zden ge√ßir!",
                "Portf√∂y√ºm enflasyona kar≈üƒ± korunuyor mu sorusu yerine, 'Enflasyona kar≈üƒ± hangi yatƒ±rƒ±m ara√ßlarƒ± daha iyi performans g√∂steriyor?' diye sorsan daha iyi olur.",
                "Portf√∂y√ºm enflasyona kar≈üƒ± korunuyor mu bilmem ama, umarƒ±m seni daha g√ºvenli bir geleceƒüe ta≈üƒ±yordur! TDX ile geleceƒüine yatƒ±rƒ±m yap.",
                "Portf√∂y√ºm enflasyona kar≈üƒ± korunuyor mu? Yoksa biraz daha bilgiye mi ihtiyacƒ±n var? TDX ile enflasyon ve yatƒ±rƒ±m konularƒ±nda eƒüitimlere katƒ±l!",
                "Portf√∂y√ºm enflasyona kar≈üƒ± korunuyor mu? Yoksa biraz daha risk mi almalƒ±sƒ±n? TDX ile risk toleransƒ±nƒ± belirle ve stratejini ona g√∂re ayarla!"
            ],
            "portf√∂y√ºm√ºn getirisi neden d√º≈ü√ºk": [
                "Portf√∂y√ºm√ºn getirisi neden d√º≈ü√ºk sorusu, bah√ßendeki √ßi√ßeklerin neden a√ßmadƒ±ƒüƒ±nƒ± merak etmek gibi. TDX ile topraƒüƒ±nƒ± analiz et!",
                "Portf√∂y√ºm√ºn getirisi neden d√º≈ü√ºk bilmem ama, umarƒ±m sabƒ±rlƒ± olmayƒ± √∂ƒüreniyorsundur! TDX ile uzun vadeli stratejiler geli≈ütir.",
                "Portf√∂y√ºm√ºn getirisi neden d√º≈ü√ºk demek, hangi hisselerin beklentilerini kar≈üƒ±lamadƒ±ƒüƒ±nƒ± bilmek demek. TDX ile performans analizi yap!",
                "Portf√∂y√ºm√ºn getirisi neden d√º≈ü√ºk? Yoksa biraz daha risk mi almalƒ±sƒ±n? TDX ile risk toleransƒ±nƒ± belirle ve stratejini ona g√∂re ayarla!",
                "Portf√∂y√ºm√ºn getirisi neden d√º≈ü√ºk sorusu yerine, 'Portf√∂y√ºm√ºn potansiyelini nasƒ±l artƒ±rabilirim?' diye sorsan daha iyi olur.",
                "Portf√∂y√ºm√ºn getirisi neden d√º≈ü√ºk bilmem ama, umarƒ±m seni hayallerinden vazge√ßirmiyordur! TDX ile hayallerine ula≈ü.",
                "Portf√∂y√ºm√ºn getirisi neden d√º≈ü√ºk? Yoksa biraz daha ara≈ütƒ±rma mƒ± yapmalƒ±sƒ±n? TDX ile derinlemesine analizler yap!",
                "Portf√∂y√ºm√ºn getirisi neden d√º≈ü√ºk? Yoksa biraz ≈üanssƒ±z mƒ±ydƒ±n? TDX ile ≈üansƒ±nƒ± artƒ±racak stratejiler geli≈ütir!"
            ],
            "portf√∂y√ºm detikkat etmem gerekenler ne": [
                "Portf√∂y√ºmde dikkat etmem gerekenler ne sorusu, bir kaptanƒ±n rotasƒ±nƒ± √ßizerken nelere dikkat etmesi gerektiƒüi gibi. TDX ile rotanƒ± belirle!",
                "Portf√∂y√ºmde dikkat etmem gerekenler ne bilmem ama, umarƒ±m kontrol√º elinde tutuyorsundur! TDX ile ipleri elinde tut.",
                "Portf√∂y√ºmde dikkat etmem gerekenler ne demek, hangi riskleri alƒ±p hangilerinden ka√ßƒ±nmak gerektiƒüini bilmek demek. TDX ile risklerini analiz et!",
                "Portf√∂y√ºmde dikkat etmem gerekenler ne? Yoksa biraz yoldan mƒ± √ßƒ±ktƒ±n? TDX ile stratejini yeniden g√∂zden ge√ßir!",
                "Portf√∂y√ºmde dikkat etmem gerekenler ne sorusu yerine, 'Portf√∂y√ºm√ºn zayƒ±f ve g√º√ßl√º y√∂nleri nelerdir?' diye sorsan daha iyi olur.",
                "Portf√∂y√ºmde dikkat etmem gerekenler ne bilmem ama, umarƒ±m seni hedeflerine ula≈ütƒ±racak doƒüru kararlarƒ± veriyorsundur! TDX ile bilin√ßli kararlar al.",
                "Portf√∂y√ºmde dikkat etmem gerekenler ne? Yoksa biraz kafan mƒ± karƒ±≈üƒ±k? TDX ile stratejini netle≈ütir!",
                "Portf√∂y√ºmde dikkat etmem gerekenler ne? Yoksa biraz daha √∂ƒürenmeye mi ihtiyacƒ±n var? TDX ile portf√∂y y√∂netimi eƒüitimlerine katƒ±l!"
            ],
            "portf√∂y√ºme ne eklemeliyim": [
                "Portf√∂y√ºme ne eklemeliyim sorusu, bir a≈ü√ßƒ±nƒ±n yemeƒüine hangi baharatlarƒ± katmasƒ± gerektiƒüi gibi. TDX ile portf√∂y√ºne lezzet kat!",
                "Portf√∂y√ºme ne eklemeliyim bilmem ama, umarƒ±m seni daha zengin edecek fƒ±rsatlarla doludur! TDX ile yeni fƒ±rsatlar ke≈üfet.",
                "Portf√∂y√ºme ne eklemeliyim demek, hangi yatƒ±rƒ±m ara√ßlarƒ±nƒ±n portf√∂y√ºn√º daha iyi dengeleyeceƒüini bilmek demek. TDX ile dengeyi yakala!",
                "Portf√∂y√ºme ne eklemeliyim? Yoksa biraz sƒ±kƒ±cƒ± mƒ± oldu? TDX ile portf√∂y√ºne heyecan kat!",
                "Portf√∂y√ºme ne eklemeliyim sorusu yerine, 'Hangi yatƒ±rƒ±m ara√ßlarƒ± portf√∂y√ºmdeki riskleri azaltƒ±r?' diye sorsan daha iyi olur.",
                "Portf√∂y√ºme ne eklemeliyim bilmem ama, umarƒ±m seni daha g√ºvenli ve kazan√ßlƒ± bir geleceƒüe ta≈üƒ±yordur! TDX ile geleceƒüine yatƒ±rƒ±m yap.",
                "Portf√∂y√ºme ne eklemeliyim? Yoksa biraz daha bilgiye mi ihtiyacƒ±n var? TDX ile portf√∂y y√∂netimi eƒüitimlerine katƒ±l!",
                "Portf√∂y√ºme ne eklemeliyim? Yoksa biraz daha risk mi almalƒ±sƒ±n? TDX ile risk toleransƒ±nƒ± belirle ve stratejini ona g√∂re ayarla!"
            ],
            "piyasalar neden d√º≈ü√ºyor portfoy etkileniyor": [
                "Piyasalar neden d√º≈ü√ºyor portf√∂y etkileniyor mu? Endi≈üelenme, dalgalar ne kadar b√ºy√ºk olursa olsun, saƒülam bir gemi batmaz. TDX ile gemini saƒülam tut!",
                "Piyasalar d√º≈üerken portf√∂y√ºn etkileniyorsa, belki de √ßok fazla aƒüƒ±rlƒ±k var demektir. TDX ile gereksiz y√ºklerinden kurtul!",
                "Piyasalar d√º≈üerken portf√∂y√ºn etkileniyorsa, bu bir fƒ±rsat olabilir. D√º≈ü√ºkten alƒ±m yaparak geleceƒüe yatƒ±rƒ±m yapmaya ne dersin? TDX ile fƒ±rsatlarƒ± yakala!",
                "Piyasalar d√º≈üerken portf√∂y√ºn etkileniyorsa, belki de stratejini g√∂zden ge√ßirmenin zamanƒ± gelmi≈ütir. TDX ile stratejini yeniden belirle!",
                "Piyasalar d√º≈üerken portf√∂y√ºn etkileniyorsa, sakin ol ve panik yapma. Borsada her zaman ini≈üler ve √ßƒ±kƒ±≈ülar olur. TDX ile soƒüukkanlƒ±lƒ±ƒüƒ±nƒ± koru!",
                "Piyasalar d√º≈üerken portf√∂y√ºn etkileniyorsa, belki de daha √ße≈üitlendirilmi≈ü bir portf√∂ye ihtiyacƒ±n var. TDX ile portf√∂y√ºn√º √ße≈üitlendir!",
                "Piyasalar d√º≈üerken portf√∂y√ºn etkileniyorsa, belki de uzun vadeli d√º≈ü√ºnmenin zamanƒ± gelmi≈ütir. TDX ile uzun vadeli stratejiler geli≈ütir!",
            ],
            "portf√∂y hedefime ula≈üƒ±rmƒ±": [
                "Portf√∂y√ºn hedefine ula≈üƒ±r mƒ±? Belki de doƒüru rotayƒ± √ßizmedin. TDX ile rotanƒ± belirle ve hedefine ula≈ü!",
                "Portf√∂y√ºn hedefine ula≈üƒ±r mƒ± bilmem ama, umarƒ±m pes etmiyorsundur! TDX ile azmini koru.",
                "Portf√∂y√ºn hedefine ula≈üƒ±r mƒ± demek, hangi adƒ±mlarƒ± atman gerektiƒüini bilmek demek. TDX ile adƒ±mlarƒ±nƒ± planla!",
                "Portf√∂y√ºn hedefine ula≈üƒ±r mƒ±? Yoksa biraz daha √ßabalaman mƒ± gerekiyor? TDX ile performansƒ±nƒ± artƒ±r!",
                "Portf√∂y√ºn hedefine ula≈üƒ±r mƒ± sorusu yerine, 'Portf√∂y√ºm√ºn potansiyeli ne kadar?' diye sorsan daha iyi olur.",
                "Portf√∂y√ºn hedefine ula≈üƒ±r mƒ± bilmem ama, umarƒ±m seni finansal √∂zg√ºrl√ºƒüe kavu≈üturuyordur! TDX ile √∂zg√ºrl√ºƒüe kanat a√ß!",
                "Portf√∂y√ºn hedefine ula≈üƒ±r mƒ±? Yoksa biraz hayal kƒ±rƒ±klƒ±ƒüƒ± mƒ± ya≈üƒ±yorsun? TDX ile umutlarƒ±nƒ± ye≈üert!",
                "Portf√∂y√ºn hedefine ula≈üƒ±r mƒ±? Yoksa biraz daha yardƒ±ma mƒ± ihtiyacƒ± var? TDX ile portf√∂y analizini yap ve stratejini geli≈ütir!"
            ],
        };

        function getAnswer(question) {
            const normalizedQuestion = question.toLowerCase();
            if (tdxKnowledgeBase[normalizedQuestion]) {
                const answer = tdxKnowledgeBase[normalizedQuestion];
                if (Array.isArray(answer)) {
                    const randomIndex = Math.floor(Math.random() * answer.length);
                    return answer[randomIndex];
                } else {
                    return answer;
                }
            } else {
                return "√úzg√ºn√ºm, bu konuda hen√ºz bir bilgim yok. Ama TDX'i kullanarak ara≈ütƒ±rma yapabilirsin!";
            }
        }

        // Chatbot mesaj g√∂nderme fonksiyonuna entegre et
        function sendMessage() {
            const input = document.getElementById('input');
            const message = input.value.trim();

            if (!message) return false;

            addMessage(message, 'user');
            input.value = '';

            // Y√ºkleme animasyonunu g√∂ster
            showLoadingAnimation();

            // Rastgele gecikme (0.8-2 saniye)
            const delay = Math.random() * 1200 + 800;

            setTimeout(() => {
                // Eƒüer selamlama veya benzer soru ise, local cevap ver
                const localAnswer = getAnswer(message);
                if (!localAnswer.startsWith('√úzg√ºn√ºm')) {
                    removeTypingIndicator && removeTypingIndicator();
                    hideLoadingAnimation && hideLoadingAnimation();
                    addMessage(localAnswer, 'bot');
                    return;
                }
                // API isteƒüi
                fetch('/chat', {
                    method: 'POST',
                    headers: {'Content-Type': 'application/json'},
                    body: JSON.stringify({message})
                })
                .then(res => res.json())
                .then(data => {
                    removeTypingIndicator && removeTypingIndicator();
                    hideLoadingAnimation && hideLoadingAnimation();
                    addMessage(data.response, 'bot');
                })
                .catch(() => {
                    removeTypingIndicator && removeTypingIndicator();
                    hideLoadingAnimation && hideLoadingAnimation();
                    addMessage("√úzg√ºn√ºm, bir hata olu≈ütu. L√ºtfen tekrar deneyin.", 'bot');
                });
            }, delay);

            return false;
        }

        function showLoadingAnimation() {
            document.getElementById('loading-indicator').style.display = 'flex';
        }

        function hideLoadingAnimation() {
            document.getElementById('loading-indicator').style.display = 'none';
        }

        // Initialize
        document.addEventListener('DOMContentLoaded', () => {
            // Setup theme toggle
            document.getElementById('themeToggle').addEventListener('click', toggleDarkMode);
            
            // Check saved preference
            if (localStorage.getItem('darkMode') === 'true') {
                toggleDarkMode();
            }
            
            // Setup emoji picker
            document.getElementById('emojiButton').addEventListener('click', toggleEmojiPicker);
            
            // Close emoji picker when clicking outside
            document.addEventListener('click', (e) => {
                const emojiPicker = document.getElementById('emojiPicker');
                const emojiButton = document.getElementById('emojiButton');
                
                if (emojiPicker.classList.contains('active') && 
                    !emojiPicker.contains(e.target) && 
                    !emojiButton.contains(e.target)) {
                    emojiPicker.classList.remove('active');
                }
            });
            
            // Setup voice recognition
            setupSpeechRecognition();
            document.getElementById('voiceButton').addEventListener('click', toggleVoiceInput);
            
            // Enter key support
            document.getElementById('input').addEventListener('keypress', function(e) {
                if (e.key === 'Enter') {
                    e.preventDefault();
                    sendMessage();
                }
            });

            // Focus input on page load
            document.getElementById('input').focus();
        });
    </script>
</body>
</html>
  